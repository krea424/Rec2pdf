<!DOCTYPE html>
<html lang="$lang$">
<head>
    <meta charset="UTF-8">
    <title>$title$</title>
    <style>
        $styles.html()$
    </style>
    $if(css)$
    <link rel="stylesheet" href="$css$" />
    $endif$
</head>
<body>

    <!-- HEADER AZIENDALE -->
    <div class="pdf-header">
        <div class="logo-container">
            <div class="logo">
                Think<span>DOC</span>
            </div>
        </div>
        <div class="meta-container">
            Generato automaticamente<br>
            $date$
        </div>
    </div>

    <!-- TITOLO E METADATI MEETING -->
    <h1 class="doc-title">$title$</h1>
    
    <div class="meeting-info">
        $if(author)$
        <div class="info-row">
            <span class="info-label">Autore:</span> $author$
        </div>
        $endif$
        
        $if(date)$
        <div class="info-row">
            <span class="info-label">Data:</span> $date$
        </div>
        $endif$

        $if(project_name)$
        <div class="info-row">
            <span class="info-label">Progetto:</span> $project_name$
        </div>
        $endif$

        <!-- Gestione Speaker da Metadati -->
        $if(metadata.meeting.participants.list)$
        <div class="info-row">
            <span class="info-label">Partecipanti:</span>
            $for(metadata.meeting.participants.list)$
                $metadata.meeting.participants.list$$sep$, 
            $endfor$
        </div>
        $endif$
    </div>

    <!-- SEZIONE RIASSUNTO (Se presente nei metadati strutturati) -->
    $if(metadata.summary)$
    <div class="summary-section">
        <h2>Sintesi Esecutiva</h2>
        <p>$metadata.summary$</p>
    </div>
    $endif$

    <!-- ACTION ITEMS STRUTTURATI (Se presenti) -->
    $if(metadata.action_items)$
    <h2>Action Items</h2>
    <ul>
    $for(metadata.action_items)$
        <li class="task-item">
            <strong>$metadata.action_items.assignee.name$:</strong> 
            $metadata.action_items.description$ 
            $if(metadata.action_items.due_date)$(Entro: $metadata.action_items.due_date$)$endif$
        </li>
    $endfor$
    </ul>
    $endif$

    <!-- CORPO PRINCIPALE DEL DOCUMENTO (Markdown standard) -->
    <!-- Qui finisce tutto ciÃ² che l'AI scrive come testo libero -->
    <div class="content-body">
        $body$
    </div>

    <!-- TRASCRIZIONE (Se presente come oggetto strutturato) -->
    $if(metadata.transcript)$
    <h2 style="page-break-before: always;">Trascrizione Dettagliata</h2>
    $for(metadata.transcript)$
    <div class="speaker-block">
        <div class="speaker-name">
            $if(metadata.transcript.speaker)$$metadata.transcript.speaker$$else$Speaker Sconosciuto$endif$
            $if(metadata.transcript.timestamp)$<span style="font-weight:normal; color:#aaa; font-size:8pt; margin-left:5px;">($metadata.transcript.timestamp$)</span>$endif$
        </div>
        <div class="speaker-content">
            $if(metadata.transcript.text)$
                $metadata.transcript.text$
            $else$
                $for(metadata.transcript.paragraphs)$
                <p>$metadata.transcript.paragraphs$</p>
                $endfor$
            $endif$
        </div>
    </div>
    $endfor$
    $endif$

    <div class="footer">
        Documento riservato generato da Rec2PDF.
    </div>

</body>
</html>